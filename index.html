<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link
      rel="icon"
      href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ðŸ¦¬</text></svg>"
    />

    <title>Comparing LCP images with lazy-loading and fetchpriority=high</title>

    <link rel="stylesheet" href="style.css" />
    <style>
      th {
        text-align: left;
      }
    </style>
  </head>
  <body>
    <h1>Comparing LCP images with lazy-loading and fetchpriority=high</h1>

    <p>Compare the median TTFB-LCP for these test cases:</p>

    <table>
      <thead>
        <tr>
          <th>Test Case</th>
          <th>LCP-TTFB</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><a href="https://westonruter.github.io/comparing-lcp-images-with-lazy-loading-and-fetchpriority-high/plain-lcp-image.html">Plain LCP image</a></td>
          <td>327.5 ms</td>
        </tr>
        <tr>
          <td>
            <a href="https://westonruter.github.io/comparing-lcp-images-with-lazy-loading-and-fetchpriority-high/lazy-loaded-lcp-image.html">Lazy-loaded LCP image</a>
          </td>
          <td>329.7 ms</td>
        </tr>
        <tr>
          <td>
            <a
              href="https://westonruter.github.io/comparing-lcp-images-with-lazy-loading-and-fetchpriority-high/lazy-loaded-lcp-image-with-fetchpriority-high-attribute.html"
              >Lazy-loaded LCP image with fetchpriority=high attribute</a
            >
          </td>
          <td>331.1 ms</td>
        </tr>
        <tr>
          <td>
            <a href="https://westonruter.github.io/comparing-lcp-images-with-lazy-loading-and-fetchpriority-high/lcp-image-with-fetchpriority-high-attribute.html"
              >LCP image with fetchpriority=high attribute</a
            >
          </td>
          <td>293.0 ms</td>
        </tr>
        <tr>
          <td>
            <a href="https://westonruter.github.io/comparing-lcp-images-with-lazy-loading-and-fetchpriority-high/lcp-image-with-fetchpriority-high-preload-link.html"
              >LCP image with fetchpriority=high preload link</a
            >
          </td>
          <td>295.4 ms</td>
        </tr>
        <tr>
          <td>
            <a
              href="https://westonruter.github.io/comparing-lcp-images-with-lazy-loading-and-fetchpriority-high/lazy-loaded-lcp-image-with-fetchpriority-high-preload-link.html"
              >Lazy-loaded LCP image with fetchpriority=high preload link</a
            >
          </td>
          <td>293.8 ms</td>
        </tr>
      </tbody>
    </table>

    <p>
      Note that the pages include five small images in the header because
      <a
        href="https://docs.google.com/document/d/1bCDuq9H1ih9iNjgzyAL0gpwNFiEP4TZS-YLRp_RuMlc/edit"
        >Chrome Resource Priorities and Scheduling</a
      >
      automatically loads the first 5 images larger than 10,000pxÂ² with high
      priority, so making the LCP image the 6th image ensures that we can see
      the effect of preloading.
    </p>

    <p>
      The LCP-TTFB metric comes from the benchmark-web-vitals command in the
      <a href="https://github.com/GoogleChromeLabs/wpp-research"
        >GoogleChromeLabs/wpp-analysis</a
      >
      repo. It reflects the LCP time subtracting the TTFB. The value is the
      median over 25 requests with broadband network emulation using the following command:
    </p>

    <pre><code>npm run research -- benchmark-web-vitals --number=25 --network-conditions=broadband --file=urls.txt --output=csv --metrics=LCP-TTFB</code></pre>

    <hr />
    <footer>
      <address><a href="https://weston.ruter.net/">@westonruter</a></address>
      <time>2024-06-03</time><br>
      <time>2025-09-30</time> (Updated)
    </footer>
  </body>
</html>
